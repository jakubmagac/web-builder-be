from pathlib import Path
from it4kt.readers import KpimarkReader
from .utils import filesystem_find


def test_find_note(testing_course):
    test_document = Path("labs", "test_admonitions.md")
    course_path = filesystem_find(test_document)
    looking_for = '<div class="admonition admonition--note">'

    page = KpimarkReader("scenario", validation=None).read(course_path)
    output = page.student_content
    assert looking_for in output


def test_find_warning(testing_course):
    test_document = Path("labs", "test_admonitions.md")
    course_path = filesystem_find(test_document)
    looking_for = '<div class="admonition admonition--warning">'

    page = KpimarkReader("scenario", validation=None).read(course_path)
    output = page.student_content
    assert looking_for in output


def test_find_task(testing_course):
    test_document = Path("labs", "test_admonitions.md")
    course_path = filesystem_find(test_document)
    looking_for_div = '<div class="task">'
    looking_for_header = '<h4 class="task__header">Ãšloha'

    page = KpimarkReader("scenario", validation=None).read(course_path)
    output = page.student_content

    assert looking_for_div in output
    assert looking_for_header in output


def test_find_example(testing_course):
    test_document = Path("labs", "test_admonitions.md")
    course_path = filesystem_find(test_document)
    looking_for = '<div class="example">'

    page = KpimarkReader("scenario", validation=None).read(course_path)
    output = page.student_content
    assert looking_for in output


def test_find_wrong_example(testing_course):
    test_document = Path("labs", "test_admonitions.md")
    course_path = filesystem_find(test_document)
    looking_for = '<div class="example example--wrong">'

    page = KpimarkReader("scenario", validation=None).read(course_path)
    output = page.student_content
    assert looking_for in output
