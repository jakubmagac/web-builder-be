from pathlib import Path

from it4kt.url import relativize

PAGE_PATH = Path('labs', '01.xml')


def test_preserve_relative_urls():
    assert relativize(PAGE_PATH, '../resources/image.png') == '../resources/image.png'
    assert relativize(PAGE_PATH, 'images/image.png') == 'images/image.png'


def test_preserve_full_urls():
    assert relativize(PAGE_PATH, 'https://python.org') == 'https://python.org'


def test_preserve_protocol_relative_urls():
    assert relativize(PAGE_PATH, '//python.org') == '//python.org'


def test_relativize_absolute_urls():
    assert relativize(PAGE_PATH, '/resources/image.png') == '../resources/image.png'


def test_relativize_absolute_urls_according_to_nested_path():
    assert (relativize(Path('nested/labs/01.xml'), '/resources/image.png')
            == '../../resources/image.png')
