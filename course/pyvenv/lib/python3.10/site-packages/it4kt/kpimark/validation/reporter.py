from it4kt.logger import logger
from pathlib import Path
from it4kt import env


class Reporter:
    def __init__(self, filepath: Path, validation_mode: str):
        self.filepath = env.content_dir / filepath
        self.validation_mode = validation_mode

    def set_validation_mode(self, mode):
        self.validation_mode = mode

    def make_error(self, msg: str):
        if self.validation_mode == "strict":
            # when strict mode is on we want to stop Kpimark conversion with an error
            logger.error("Validation Error in file {}: {}".format(self.filepath, msg))

    def make_warning(self, msg: str):
        logger.warning(
            "Validation Warning in file {}: {}".format(self.filepath, msg))
