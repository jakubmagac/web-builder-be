{% extends "_base.html" %}

{% block meta_title %}{{ i18n.t('builder:courseOverview') }}{% endblock %}
{% block body_header_title %}{{ i18n.t('builder:courseOverview') }}{% endblock %}

{% block body_content %}
  <div class="table">
    <table class="overview table__table">
      {% set weeks = 14 %}
      {% if env.published_weeks %}
        {% set weeks = env.published_weeks %}
      {% endif %}
      <tr class="overview__row">
        <th class="overview__col-header">Týždeň</th>
        {% for folder, pages in overview.folders.items() %}
        <th class="overview__col-header">{{ folder.title }}</th>
        {% endfor %}
      </tr>
      {% for week_num in range(1, 14) %}
        <tr class="overview__row">
          <th class="overview__row-header">{{ week_num }}.</th>
          {% for folder, pages in overview.folders.items() %}
            {% set helpers = namespace(is_rendered=false) %}
            <td class="overview__col">
            {% for page in pages %}
              {% if page.week == week_num %}
                {% set helpers.is_rendered = true %}
                  <a
                    href="{{  '' if page.is_hidden() else page.url }}"
                    class="overview__col-link{% if page.is_hidden() %} disabled{% endif %}"
                  >
                    {{ page.title }}
                  </a>
                {% endif %}
            {% endfor %}
            {% if helpers.is_rendered == false %}
              -
            {% endif %}
          </td>
          {% endfor %}
        </tr>
      {% endfor %}
    </table>
  </div>
{% endblock %}
