{% import "_macros.html" as macros with context %}

<!-- NAVBAR -->
<nav class="page__navbar navbar navbar-expand-lg navbar-light navbar-autoreveal">
<!-- CONTAINER -->
<div class="container"> <!-- optional but not needed for navbar items -->
  <a class="navbar-brand" href="{{ course.url|relative }}">{{ course.acronym }}</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      {{ macros.icon("menu", size="large") }}
    </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      {% for item in course.menu %}
          {% if item.is_folder() %}
            <li class="nav-item dropdown{% if page in item.subitems %} active{% endif %}">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                {{ item.title }}
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                {% for subitem in item.subitems %}
                  {% if subitem.is_hidden() %}
                    <span class="dropdown-item disabled">
                  {% else %}
                    <a class="dropdown-item{% if subitem.hidden %} disabled{% endif %}{% if subitem == page %} active{% endif %}" href="{{ subitem.url|relative }}">
                  {% endif %}
                    {% if subitem.week %}
                      <span class="badge badge-secondary" title="{{ subitem.week }}. {{ i18n.t('builder:week', ['lowercase']) }}">{{ subitem.week }}</span>
                    {% endif %}
                    {{ subitem.title }}
                  {% if subitem.is_hidden() %}
                    </span>
                  {% else %}
                    </a>
                  {% endif %}
                {% endfor %}
              </div>
            </li>
          {% else %}
            {% if not item.is_homepage() %}
              <li class="nav-item{% if item == page %} active{% endif %}">
                <a class="nav-link" href="{{ item.url|relative }}"
                   {% if item.is_external() %}target="_blank"{% endif %}
                >{{ item.title }}
                {% if item.is_external() %}
                  {{ macros.icon("external-link") }}
                {% endif %}
                </a>
              </li>
            {% endif %}
        {% endif %}
      {% endfor %}
    </ul>
    <ul class="navbar-nav">
      <li class="nav-item{% if course.course_overview.url == page.url %} active{% endif %}">
        <a class="nav-link" href="{{ course.course_overview.url | relative }}"
           title="{{i18n.t("builder:courseOverview")}}">
          {{ macros.icon("calendar", size="medium") }}
        </a>
      </li>
      <li class="nav-item{% if course.objectives_overview.url == page.url %} active{% endif %}">
        <a class="nav-link" href="{{ course.objectives_overview.url | relative }}"
           title="{{i18n.t("builder:courseObjectivesOverview")}}">
          {{ macros.icon("check-circle", size="medium") }}
        </a>
      </li>
    </ul>
    {% include "_languages.html" %}
  </div>
  <!-- end of container -->
</div>
</nav>
<!-- end of NAVBAR -->
