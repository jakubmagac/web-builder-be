{% macro make_link(item) %}
  {% if item.is_hidden() %}
    <div class="menu__item menu__item--disabled">
  {% else %}
    <a class="menu__item menu__link{% if item.url == page.url %} is-active{% endif %}" href="{{ item.url|relative }}"
      {% if item.is_external() %}target="_blank"{% endif %}>
  {% endif %}
    {% if item.week %}
      <span class="menu__week" title="{{ item.week }}. týždeň">{{ item.week }}</span>
    {% endif %}
    <span class="menu__label">{{ item.title }}
      {% if item.is_external() %}
        <svg class="icon icon--inline"><use xlink:href="{{ 'styles/feather-sprite.svg'|relative }}#external-link"/></svg>
      {% endif %}
    </span>
  {% if item.is_hidden() %}
    </div>
  {% else %}
    </a>
  {% endif %}
{% endmacro %}

<ul class="menu">
  {% for item in course.menu %}
    <li>
      {% if not item.is_folder() %}
        {{ make_link(item) }}
      {% else %}
        <div class="menu__subtitle">{{ item.title }}</div>
        <ul class="menu__submenu">
          {% for page in item.subitems %}
            <li>
              {{ make_link(page) }}
            </li>
          {% endfor %}
        </ul>
      {% endif %}
    </li>
  {% endfor %}
</ul>
