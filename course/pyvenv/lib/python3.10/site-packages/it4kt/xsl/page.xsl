<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"
                xmlns:p="http://kpi.fei.tuke.sk/practices"
                xmlns:h="http://www.w3.org/1999/xhtml">

    <xsl:import href="localization.xsl"/>
    <xsl:import href="content.xsl"/>
    <xsl:output omit-xml-declaration="yes"/>

    <!-- =============================== page ============================== -->
    <!-- Main template for page -->
    <xsl:template match="p:page">
        <div class="page-contents">
            <xsl:if test="p:objective">
              <section class="objectives">
                  <h2 class="objectives__header section-header">
                      <xsl:value-of select="$lang.objectives"/>
                  </h2>
                  <ul class="objective">
                      <xsl:apply-templates select="p:objective"/>
                  </ul>
              </section>
            </xsl:if>

            <xsl:apply-templates select="p:section"/>
        </div>
    </xsl:template>

    <xsl:template match="p:section">
        <section>
            <xsl:choose>
                <xsl:when test="count(ancestor::p:section)=0">

                    <h2><xsl:value-of select="p:title"/></h2>
                </xsl:when>

                <xsl:when test="count(ancestor::p:section)=1">
                    <h3><xsl:value-of select="p:title"/></h3>
                </xsl:when>

                <xsl:when test="count(ancestor::p:section)=2">
                    <h4><xsl:value-of select="p:title"/></h4>
                </xsl:when>
            </xsl:choose>

            <xsl:apply-templates select="*[(name() != 'section' and name() != 'title')]"/>
        </section>
    </xsl:template>
    <!-- ===================== copy all html elements ====================== -->
    <xsl:template match="h:*">
        <xsl:element name="{local-name(.)}">
            <xsl:apply-templates select="@*|node()"/>
         </xsl:element>
    </xsl:template>

    <xsl:template match="@*|text()">
        <xsl:copy/>
    </xsl:template>
</xsl:stylesheet>
